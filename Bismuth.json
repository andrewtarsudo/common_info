{
  "product": {
    "description": "Проект",
    "type": "object",
    "properties": {
      "id": {
        "description": "Идентификатор продукта",
        "type": "integer",
        "minimum": 1,
        "required": true
      },
      "productId": {
        "description": "Строковый идентификатор",
        "type": "string",
        "minimum": 1,
        "required": true
      },
      "name": {
        "description": "Название",
        "type": "string",
        "required": true
      },
      "purpose": {
        "description": "Назначение",
        "type": "string",
        "required": true
      },
      "deliveries": {
        "description": "Поставки",
        "type": "object",
        "properties": {
          "number": {
            "description": "Номер поставки",
            "type": "string",
            "pattern": "^([0-9]{3}.[0-9]{3})$"
          },
          "customer": {
            "description": "Получатель",
            "type": "string"
          }
        }
      },
      "year": {
        "description": "Год выпуска",
        "type": "integer",
        "pattern": "^(20[0-2][0-9])$"
      },
      "isSeries": {
        "description": "Серийное ли изделие?",
        "type": "boolean",
        "default": false
      },
      "groupName": {
        "description": "Название серии",
        "type": "string",
        "required": true,
        "default": null
      },
      "numModification": {
        "description": "Номер модификации/версии",
        "type": "integer",
        "minimum": 0
      },
      "link": {
        "description": "Ссылка на документ",
        "type": "string",
        "required": true,
        "pattern": "^(/svn/*)$"
      },
      "systemRequired": {
        "description": "Системные требования",
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "paramName": {
              "description": "Название параметра",
              "type": "string"
            },
            "paramValue": {
              "description": "Значение параметра",
              "type": "string"
            },
            "paramRelation": {
              "description": "Отношение к значению параметра",
              "enum": [
                "less", "at least", "greater than", "not greater than"
              ]
            }
          }
        }
      },
      "hardware": {
        "description": "Комплектация",
        "type": "object",
        "properties": {
          "interfaces": {
            "description": "Интерфейсы",
            "type": "array",
            "items": {
              "interfaceName": {
                "description": "Название интерфейса",
                "type": "string",
                "required": true
              },
              "interfaceAmount": {
                "description": "Количество интерфейсов",
                "type": "int",
                "minimum": 1,
                "required": true
              }
            }
          },
          "voltage": {
            "description": "Допустимые напряжения",
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "currentType": {
                  "description": "Тип тока",
                  "enum": [ "AC", "DC" ]
                },
                "voltageValue": {
                  "description": "Величина напряжения",
                  "type": "integer",
                  "minimum": 0
                }
              }
            }
          },
          "hardwareNeeded": {
            "description": "Необходимые компоненты",
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "hardwareName": {
                  "description": "Название компонента",
                  "type": "string"
                },
                "addInfo": {
                  "description": "Дополнительная информация",
                  "type": "string"
                }
              }
            }
          },
          "componentsImplemented": {
            "description": "Используемые части аппаратного комплекса",
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "componentName": {
                  "description": "Название части",
                  "type": "string",
                  "required": true
                },
                "componentAmount": {
                  "description": "Количество частей",
                  "type": "number",
                  "minimum": 0.0,
                  "required": true
                }
              }
            }
          }
        }
      },
      "software": {
        "description": "Программное обеспечение",
        "type": "object",
        "properties": {
          "operatingSystem": {
            "description": "Используемые операционные системы",
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "nameOS": {
                  "description": "Название операционной системы",
                  "type": "string",
                  "required": true
                },
                "version": {
                  "description": "Версия операционной системы",
                  "type": "string",
                  "required": true
                }
              }
            }
          },
          "softNeeded": {
            "description": "Требуемое программное обеспечение",
            "type": "array",
            "items": {
              "nameSoftware": {
                "description": "Название программного обеспечения",
                "type": "string",
                "required": true
              },
              "versionSoftware": {
                "description": "Версия программного обеспечения",
                "type": "string",
                "pattern": "^([0-9]{1,}.[0-9]{1,})$"
              },
              "mandatory": {
                "description": "Обязательность программного обеспечения",
                "type": "boolean",
                "required": true
              }
            }
          },
          "recovery": {
            "description": "Резервирование данных",
            "type": "object",
            "properties": {
              "isReleased": {
                "description": "Есть ли возможность резервирования?",
                "type": "boolean",
                "required": true
              },
              "workType": {
                "description": "Схема работы",
                "enum": [
                  "Active-Active",
                  "Active-Standby",
                  "Standalone"
                ]
              }
            }
          },
          "protocols": {
            "description": "Поддерживаемые протоколы",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      }
    }
  },
  "if": {
    "product": { "properties": { "isSeries": { "const": false } } }
  },
  "then": {
    "product": { "properties": { "groupName": { "const": null } } }
  },
  "if": {
    "product": {
      "properties": {
        "systemRequired": {
          "items": { "properties": { "paramName": { "const": null } } }
        }
      }
    }
  },
  "then": {
    "product": {
      "properties": { "systemRequired": { "items": { "properties": {
              "paramValue": { "const": null },
              "paramRelation": { "const": null }
            }
          }
        }
      }
    }
  },
  "else": {
    "product": {
      "properties": { "systemRequired": { "items": { "properties": {
              "paramValue": { "required": true },
              "paramRelation": { "required": true }
            }
          }
        }
      }
    }
  }
}
