# Назначение

Основное назначение программы - получение списка работ (IssueWorkItem), созданных на YouTrack за определенный промежуток времени, а также дедлайн задач (Issue), к которым привязаны эти работы. Для каждой работы отображается дата создания, номер задачи на YouTrack и затраченное время. При необходимости результаты можно сохранить в TXT-файл с возможностью перезаписи при указании уже существующего.

Формат вывода:
```
----------
Дата: <ДД месяц ГГГГ> г
Задача: <название проекта-номер задачи>
Затраченное время: <затраченное время> мин, для таблицы: <модифицированное затраченное время> ч
Дедлайн/deadline: <ДД месяц ГГГГ> г, для таблицы: <ДД.ММ.ГГГГ>
----------
```
**Примечание** - для некоторых задач дедлайн не задан. В таких случаях будет указано, что он отсутствует, и последняя строка будет иметь вид:
```
Дедлайн/deadline: не задан
```
Выводимая информация группируется по дате добавления затраченного времени на YouTrack для каждого дня в промежутке. Группа также может быть пуста.

При сохранении в существующий TXT-файл он должен находиться в той же директории, что и программа, или дочерней. Новый файл создается в директории, где находится программа, или уже существущей дочерней.

# Требования для успешной работы программы

Для корректной работы не требуются особые дополнительные условия.

# Работа программы

## Ввод пользователя

#### При вводе строки __exit__ (допускается написание и без кавычек, и с любыми кавычками) при запросе данных от программы выполнение всех действий прекращается, а окно закрывается.

В течение работы программы у пользователя будут запрошены следующие данные:

---- (1) логин на YouTrack в случае возникновения проблемы с идентификацией пользователя. Формат: без кавычек.

Программа сама определяет пользователя, запустившего скрипт, и далее использует как логин. Однако при ряде обстоятельств: к ПК привязано несколько человек, логин на ПК отличается от логина на YouTrack и т.п., - возможны проблемы с однозначной идентификацией. В этих случаях потребуется ручной ввод.

**Примечание** - при необходимости задать логин, отличный от своего, укажите в следующем запросе ввода
```
login <новый_логин>
```
К новому логину предъявляются те же требования. При вводе некорректного логина программа продожит работу только при получении корректного значения, даже определив его прежде автоматически.

---- (2) начальная дата периода. Формат: ГГГГ-ММ-ДД. Значение по умолчанию - значение timestamp из файла youtrack.json. При отсутствии значения или его некорректности в файле используется первый день текущего года (2022-01-01);

---- (3) конечная дата периода. Формат: ГГГГ-ММ-ДД. Значение по умолчанию - текущий день. При отсутствии значения или его некорректности в файле используется текущий день;

**Примечание** - если начальная дата находится позже конечной даты в календаре, то используется значения по умолчанию.

---- (4) сохранение результатов работы в текстовый TXT-файл.

**Примечание** - текстовые сообщения программы или выводимые ошибки в файл не записываются.

* Чтобы сохранить данные, введите название TXT-файла без расширения, до '.txt' (для файла test.txt введите test) или относительный путь до файла без расширения файла. При вводе названия с расширением '.txt' будет автоматически удалено.

* Чтобы не сохранять данные, нажмите "Enter". После этого через небольшой промежуток времени программа прекратит работу, а окно закроется.

-------- (4.1) если указанный файл не существует, то он будет создан, а в него будет записаны результаты. После оповещения времени программа прекратит работу, а окно закроется.

-------- (4.2) если указанный файл уже существует, то будет запрошено подтверждение перезаписи. По умолчанию - отмена перезаписи.

* Чтобы перезаписать содержимое файла, введите Y или Д (Yes/Да). Регистр не важен.

* Чтобы отменить изменение файла, введите любую другую строку или нажмите "Enter".

------------ (4.2.1) если перезапись отменена, то осуществляется возврат к пункту (3).

Создается или изменяется файл, находящийся в той же директории, где находятся yt_lite.exe, или дочерней.

## Вывод программы

### Описание параметров

По завершении всех действий на экран выводится вышеуказанная информация в формате:

* если дедлайн задан:
```
----------
Дата: <ДД месяц ГГГГ> г
Задача: <название проекта-номер задачи>
Затраченное время: <затраченное время> мин, для таблицы: <модифицированное затраченное время> ч
Дедлайн/deadline: <ДД месяц ГГГГ> г, для таблицы: <ДД.ММ.ГГГГ>
----------
```
* если дедлайн не задан:
```
----------
Дата: <ДД месяц ГГГГ> г
Задача: <название проекта-номер задачи>
Затраченное время: <затраченное время> мин, для таблицы: <модифицированное затраченное время> ч
Дедлайн/deadline: не задан
----------
```
* `Дата` - календарный день, когда было создано затраченное время.
  Формат: <ДД месяц ГГГГ> г (01 января 2022 г);
* `Задача` - имя задачи, к которой относится затраченное время.
  Формат: <название проекта-номер задачи> (DOC_ST-1);
* `Затраченное время` - количество времени, зарегистрированное в YouTrack.
  Формат: <затраченное время> мин (450 мин);
* `Затраченное время, для таблицы` - количество времени, которое будет внесено в таблицу.
  Формат: <модифицированное затраченное время> ч (7,5 мин);
* `Дедлайн/deadline` - дата крайнего срока завершения задачи в формате YouTrack.
  Формат: <ДД месяц ГГГГ> г (2 февраля 2021 г);
* `Дедлайн/deadline, для таблицы` - дата крайнего срока завершения задачи в формате, заданном в таблице.
  Формат: <ДД.ММ.ГГГГ> (03.03.2020).

**Примечание** - вид записи месяца словом и разделитель целой и дробной части числа зависит от языка интерфейса операционной системы (). Это будет видно в примере ниже.

Пример вывода результатов:
```
----------
Дата: 05 March 2022 г
Задача: DOC_ST-896
Затраченное время: 240 мин, для таблицы: 4 ч
Дедлайн/deadline: 05 March 2021 г, для таблицы: 05.03.2021
----------
----------
----------
----------
----------
----------
Дата: 11 March 2022 г
Задача: DOC_ST-1654
Затраченное время: 30 мин, для таблицы: 0.5 ч
Дедлайн/deadline: 25 March 2022 г, для таблицы: 25.03.2022
----------
```

### Группирование результатов

Результаты разбиваются на группы по дате создания затраченного времени на YouTrack. Для удобства группы отделены друг от друга горизонтальными чертами.
```
----------
```
Для каждой даты, входящей в период, автоматически создается пустая группа. Начальная и конечная даты также включаются. Далее ответы на запросы от YouTrack распределяются по группам. Таким образом, возможны несколько подряд идущих горизонтальных черт. Это не баг, а фича. А если ты вдруг дочитал до этого момента, то подойди и отбей пятюню.

## Дальнейшие запланированные модификации
* взаимодействие с xlsx-таблицей:
  * считывание информации из таблицы (done);
  * изменение информации (done);
  * добавление информации (in progress);
  * задание стилей клеткам таблицы (in progress).
* взаимодействие с информацией из запросов:
  * сопоставление информации из запросов и таблицы (done);
  * конвертирование одного вида информации в другой и наоборот (done);
  * нахождение информации и любого ее компонента, что необходимо добавить в таблицу (done);
  * добавление информации из запросов в таблицу (in progress);
  * изменение информации из таблицы согласно информации из запросов (done).
 
 Т.е. предполагается полностью автоматизированное обновление и добавление информации в отчет без необходимости осуществлять эти действия вручную.
 
 Если есть идеи, предложения, жалобы или пожелания, то обращайтесь по контактам [ниже](#контакты).

# Контакты

* 303 кабинет
* Mattermost: @tarasov-a
* Telegram: @andrew.tar
