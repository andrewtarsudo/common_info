# Скрипты, команды protei-daemon#

## Команды protei-daemon##
|Команда|Описание|
|:------|:-------|
|man protei–daemon|Открыть руководство|
|protei-daemon cmd_list|Вывести на экран все доступные команды|
|protei–daemon –h<br>protei–daemon --help|Открыть краткую справку|
|protei–daemon list|Вывести на экран все доступные службы|
|protei–daemon command|Выполнить команду|
|protei–daemon state|Вывести на экран состояние всех служб|

## Базовые скрипты##
|Скрипт|Описание|
|:-----|:-------|
|start|Скрипт для запуска модуля|
|stop|Скрипт для остановки модуля|
|reload|Скрипт для перегрузки файла конфигурации|
|restart|Скрипт для перезапуска модуля|
|trace|Скрипт для отображения последних записей основного журнала системы журналирования TRACE_FILE конфигурационного файла .service.conf|
|status|Скрипт для отображения текущего состояния модуля|
|version|Скрипт для отображения текущей версии программного обеспечения|

## Остальные скрипты##
|Скрипт|Описание|
|:-----|:-------|
|check_history.sh|Скрипт для очистки архивных файлов|
|common_command.sh|Скрипт для выполнения пользовательских команд|
|info.sh|Скрипт для отображения информации о системе или модуле|
|move_log.sh|Скрипт для перемещения журналов программного обеспечения в архивный каталог при перезапуске модуля|
|load_config.sh|Скрипт для загрузки конфигурации системы|
|log_message.sh|Скрипт для записи сообщения в лог–файл|
|on_local_ip_changed.sh|Скрипт для перегрузки модуля в случае смены локального IP–адреса при задании соответствующего параметра в файле .service.conf|
|utils_lib.sh|Библиотека вспомогательных функций для shell–скриптов|
|patch_config.sh|Скрипт для автоматизации исправления конфигурационных файлов приложения|
|save_config.sh|Скрипт для сохранения конфигурации системы|
|log_script.sh|Скрипт для записи сообщения в лог–файл|
|reason_ask.sh|Скрипт для определения причины остановки|
|setup_agent_password|Скрипт для смены пароля при удаленном подключении SSH|
|configure–trace.sh|Скрипт для настройки конфигурационного файла trace.cfg|
|debug|Скрипт для настройки конфигурационного файла trace.cfg|
|debug–configure|Скрипт для настройки конфигурационного файла trace.cfg|
|del_req.sh|Скрипт для очистки временных данных из каталогов, связанных с механизмом оперативных запросов на управление приложением|
|delayed_restart|Скрипт для отложенной перезагрузки модуля MKD, активируемой после завершения последнего вызова|
|pcp_reload|Скрипт для отправки запроса на перегрузку настроек маршрутизации VPBX|
|pcp_reload_pbx1|Скрипт для отправки запроса на перегрузку настроек маршрутизации первого VPBX|
|pretend_startup|Скрипт для запуска эмуляции MKD с целью проверки валидности файлов конфигурации и профилей|
|profiles_reload_pbx1|Скрипт для отправки запроса на перегрузку профилей и маршрутизации первого VPBX|
|reload.ap|Скрипт для перегрузки конфигурационного файла ap.cfg|
|reload.cpe.mailbox_action|Скрипт для перегрузки конфигурационного файла mailbox_action.cfg|
|reload.cpe.perl|Скрипт для перегрузки всех файлов платформы CPE|
|reload.cpe.rp|Скрипт для перегрузки конфигурационного файла rp.cfg|
|reload.cpe.rp_pc|Скрипт для перегрузки подсистемы Profile Control услуги RP|
|reload.cpe.vm|Скрипт для перегрузки конфигурационного файла vm.cfg|
|reload.sh|Скрипт для перегрузки модуля MKD|
|reload.trace|Скрипт для перегрузки конфигурационного файла trace.cfg|
|req.sh|Скрипт для выполнения оперативных запросов на управление приложением|
|profiles_reload|Скрипт для создания Request–файла с запросом на перегрузку профилей|
|req_backup|Скрипт для создания Request–файла с запросом на создание резервной копии профилей|
|req_snap_off|Скрипт для создания Request–файла с запросом на создание резервной копии профилей|
|req_snap_on|Скрипт для создания Request–файла с запросом на создание резервной копии профилей|
|trace_auth|Скрипт для отображения содержимого журнала sip_authorization*.log|
|trace_diagnostic|Скрипт для отображения содержимого файла diagnostic*.log|
|trace_sip|Скрипт для отображения содержимого файлов sip_transport*.log|
|mkd_voc.pl|Скрипт для запуска голосовой подсказки видеоконференции|
|rp.pl|Скрипт для запуска услуги RP|
|send_email.pl|Скрипт для отправки email на адрес, указанный абонентом|
|profiles_reload_pbx1|Скрипт для отправки запроса на перегрузку профилей и маршрутизации первого VPBX|
|reload.sh|Скрипт для перезапуска модуля|
|dict_queue.py|Модуль именованных очередей|
|\__init\__.py|Модуль загрузки конфигурации|
|pwgen.py|Модуль генерации паролей|
|server.py|Основной серверный модуль|
|sftp.py|Модуль поддержки SFTP|
|utils.py|Вспомогательный модуль различных методов|
|remote–agent.py|Основной исполняемый файл|
|restart_all|Скрипт для перезагрузки всех модулей|
|add–sftp–allowed–dir.py|Скрипт для добавления разрешенного направления SFTP|
|remove–sftp–allowed–dir.py|Скрипт для удаления разрешенного направления SFTP|
|setup_db_mysql.sh|Скрипт для создания базы данных MySQL|
|argsGenerator.sh|Скрипт для создания параметров запуска службы|
|setup_db_pgsql.sh|Скрипт для создания базы данных PostgreSQL|
|setup_db.sh|Скрипт для создания базы данных|
|ca.import.user.sh|Скрипт импорта политик безопасности Web–интерфейса: роли, логины, пароли, права доступа своих пользователей|
|catalina.sh|Основной скрипт запуска и остановки сервера Tomcat. Требует наличие параметров для запуска, как опции окружения, настройки JVM|
|catalina–tasks.xml|Файл настройки пользовательских задач система сборки и выполнения, Ant, для управляющего приложения Manager. Приложение позволяет авторизоваться пользователям, управлять жизненным циклом всех приложений, запущенных на данном сервере Tomcat, а также конфигурировать задачи JMX и JSPC|
|configtest.sh|Скрипт проверки конфигурации сервера Tomcat, проверяющий конфигурации сервера и наличие обязательных файлов и скриптов|
|daemon.sh|Надстройка над основным демоном запуска сервера. Может использоваться в качестве шаблона для автоматического запуска Tomcat во время загрузки из директории /etc/init.d с помощью jsvc|
|digest.sh|Скрипт для конвертации пароля с указанным алгоритмом шифрования. При использовании пользовательских паролей в конфигурации Tomcat возможно хранить их в зашифрованном виде и с помощью скрипта проверять соответствие оригинального пароля и его шифрованного значения для дальнейших операций|
|setclasspath.sh|Скрипт задания переменных окружения и путей к необходимым классам для сервера Tomcat, вспомогательная утилита для запуска сервера|
|shutdown.sh|Скрипт для остановки сервера Tomcat, использует catalina.sh stop|
|startup.sh|Скрипт для запуска сервера Tomcat, использует catalina.sh start|
|tool-wrapper.sh|Скрипт для выполнения команд сервера из консоли. Может использоваться для установки переменных среды и последующего вызова основного метода любого необходимого класса. Используется внутри скрипта digest.sh|

## Пакеты \*.jar##
|Пакет|Описание|
|:----|:-------|
|bootstrap.jar|Штатная библиотека Tomcat, содержит метод инициализации main() и классы реализации загрузчика классов, от которых он зависит|
|tomcat-juli.jar|Библиотека логирования действий сервера Tomcat. Сам сервер использует данный логгер|
